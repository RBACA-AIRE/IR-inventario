import sql from 'mssql';
import 'msnodesqlv8';

const dbSettings = {
  server: 'IRPRDV0496\\SQLEXPRESS',
  database: 'DB_CMDServer',
  driver: 'msnodesqlv8',
  options: {
    trustedConnection: true,
    trustServerCertificate: true
  }
};

// Exportar función que devuelve la conexión
export async function getConnection() {
  try {
    console.log('Intentando conectar...');
    const pool = await sql.connect(dbSettings);
    console.log("Conexión exitosa a SQL Server");
    return pool;
  } catch (error) {
    console.error("Error al conectar con la base de datos:", error);
    throw error;
  }
}