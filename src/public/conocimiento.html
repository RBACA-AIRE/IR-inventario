<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <title>Control de Servidores</title>
    <link href="assets/css/style.css" rel="stylesheet" type="text/css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
        integrity="sha512-..." crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- ===================Stilos ========================================= -->
</head>

<body>
    <!-- ===============================Navegacion============================ -->
    <div class="container">
        <div class="navigation">
            <ul>
                <li>
                    <a href="index.html" class="icon-link" title="Intercorp Retail">
                        <img src="assets/imgs/intercorp-azul.ico" alt="Icono" class="icono">
                        <span class="title">Intercorp Retail</span>
                    </a>
                </li>

                <li>
                    <a href="index.html" title="Dashboard">
                        <span class="icon"><ion-icon name="home-outline"></ion-icon></span>
                        <span class="title">Dashboard</span>
                    </a>
                </li>
                <li>
                    <a href="404-page.html" title="Gestión del Negocio">
                        <span class="icon"><ion-icon name="business-outline"></ion-icon></span>
                        <span class="title">Gestión del Negocio</span>
                    </a>
                </li>
                <li>
                    <a href="register.html" title="Gestión de Usuarios">
                        <span class="icon"><ion-icon name="people-outline"></ion-icon></span>
                        <span class="title">Gestión de Usuarios</span>
                    </a>
                </li>
                <li>
                    <a href="accesoRemoto.html" title="Accesos Remotos">
                        <span class="icon"><ion-icon name="desktop-outline"></ion-icon></span>
                        <span class="title">Gestión de Credenciales</span>
                    </a>
                </li>
                <li>
                    <a href="inventario.html" title="Inventario General">
                        <span class="icon"><ion-icon name="file-tray-full-outline"></ion-icon></span>
                        <span class="title">Inventario General</span>
                    </a>
                </li>
                <li>
                    <a href="conocimiento.html" title="Base del Conocimiento">
                        <span class="icon"><ion-icon name="archive-outline"></ion-icon></span>
                        <span class="title">Base del Conocimiento</span>
                    </a>
                </li>
                <li>
                    <a href="#" id="logoutLink" title="Cerrar Sesión">
                        <span class="icon"><ion-icon name="exit-outline"></ion-icon></span>
                        <span class="title">Cerrar Sesión</span>
                    </a>
                </li>
            </ul>
        </div>
    </div>


    <!-- ================================ Main ===============================================-->
    <div class="main">
        <!--<h1>Dashboard</h1>
        <div class="date">
            <input type="date">
        </div>
        <div class="insights">

        </div>-->
        <div class="topbar">
            <div class="toggle">
                <ion-icon name="menu-outline"></ion-icon>
            </div>
            <div class="search">
                <label>
                    <input type="text" placeholder="Search here">
                    <ion-icon name="search-outline"></ion-icon>

                </label>
            </div>
            <div class="user">
                <img src="assets/imgs/customer01.jpg" alt="">
            </div>
        </div>

        <!--==============================tabla conocimiento==============================-->

        <div class="container min-w-full px-4 text-base md:text-[20px] lg:text-[22px] xl:text-[21px]">
            <!-- Título -->
            <div class="flex justify-between items-center mb-6">
                <h1 class="text-2xl font-semibold text-gray-700">
                    Base del Conocimiento
                </h1>
            </div>

            <!-- Botones de filtro -->
            <header class="flex space-x-2 mb-2">
                <button
                    class="flex items-center space-x-1 border border-gray-300 rounded px-2 py-1 text-blue-600 hover:bg-gray-100"
                    type="button">
                    <i class="fas fa-undo-alt"></i>
                    <span>Instructivos</span>
                </button>
                <button
                    class="flex items-center space-x-1 border border-gray-300 rounded px-2 py-1 text-blue-600 hover:bg-gray-100"
                    type="button">
                    <i class="fas fa-question-circle"></i>
                    <span>Preguntas</span>
                </button>
                <button
                    class="flex items-center space-x-1 border border-gray-300 rounded px-2 py-1 text-blue-600 hover:bg-gray-100"
                    type="button">
                    <i class="fas fa-video"></i>
                    <span>Vídeos</span>
                </button>
            </header>

            <!-- Contenedor principal -->
            <main class="flex flex-1 overflow-hidden rounded border border-gray-300 bg-white">

                <!-- Barra lateral -->
                <aside class="w-[270px] border-r border-gray-400 bg-[#f9faff] p-3">
                    <label for="tipoContenido" class="mb-1 text-[14px] font-normal text-gray-700 block">
                        Seleccione tipo de contenido:
                    </label>
                    <select
                        class="mb-2 w-full rounded border border-gray-300 bg-white px-2 py-1 text-[14px] text-gray-900 focus:outline-none focus:ring-1 focus:ring-blue-500"
                        id="tipoContenido" name="tipoContenido">
                        <option>Instructivos</option>
                    </select>

                    <!-- Lista de módulos (dinámica) -->
                    <div id="modulosContainer">
                        <div
                            class="bg-blue-600 text-white text-[13px] font-bold px-2 py-1 select-none flex justify-between items-center">
                            <span>MÓDULOS</span>
                            <i class="fas fa-caret-up"></i>
                        </div>
                        <ul id="modulosList" class="text-[13px] text-[#111]">
                            <!-- Módulos serán insertados aquí con JS -->
                        </ul>
                    </div>


                </aside>

                <!-- Sección principal -->
                <section class="flex-1 flex flex-col border-l border-gray-400">
                    <!-- Encabezado de tabla -->
                    <div
                        class="flex items-center justify-between bg-[#3b82f6] text-white text-[13px] font-bold select-none">
                        <div class="flex-1 px-3 py-2 border-r border-[#5a8de0] uppercase">
                            DESCRIPCIÓN
                            <i class="fas fa-caret-up ml-1"></i>
                        </div>
                        <div class="w-[80px] text-center py-2 border-l border-[#5a8de0] uppercase">
                            VER
                        </div>
                    </div>

                    <!-- Registros -->
                    <div id="manualesList" class="divide-y divide-gray-300">
                        <div class="text-center py-4">
                            <div class="flex flex-col items-center justify-center">
                                <div class="text-[20px] text-[#111] mb-2 font-semibold">SELECCIONE MÓDULO</div>
                                <img src="assets/imgs/doubletap.gif" alt="Icono de mano tocando pantalla" width="250"
                                    height="250" class="select-none" />
                            </div>
                        </div>
                    </div>



                    <!-- Texto de registros -->

                    <!-- Paginación -->
                    <div class="flex items-center justify-end gap-2 px-3 py-2 text-[13px] text-[#666]">
                        <span>Anterior</span>
                        <button type="button" class="border border-gray-300 rounded px-3 py-1 bg-white text-[#333]">
                            1
                        </button>
                        <span>Siguiente</span>
                    </div>
                </section>
            </main>
        </div>
        <!-- Chatbot flotante -->
        <div id="chatbot-container">
            <div id="chatbot-toggle">
                <img src="assets/imgs/chatbot.png" alt="Chatbot" />
            </div>
            <div id="chatbot-box" class="hidden">
                <div id="chatbot-header">Chatbot</div>
                <div id="chatbot-messages"></div>
                <input type="text" id="chatbot-input" placeholder="Escribe un mensaje..." />
            </div>
        </div>



        <!-- ==================== Scripts ========================= -->
        <script src="assets/js/main.js"></script>


        <!-- =====================Chat BOT========================-->
        <script src="assets/js/chatbot.js"></script>

        <!--==================== Script para manejar el logout ============= -->
        <script>
            document.addEventListener('DOMContentLoaded', function () {
                const logoutLink = document.getElementById('logoutLink');

                if (logoutLink) {
                    logoutLink.addEventListener('click', function (e) {
                        e.preventDefault();

                        // Mostrar mensaje de confirmación
                        if (confirm('¿Estás seguro de que quieres cerrar sesión?')) {
                            // Hacer logout mediante fetch API
                            fetch('/logout', {
                                method: 'POST',
                                credentials: 'include' // importante para incluir cookies
                            })
                                .then(response => response.json())
                                .then(data => {
                                    if (data.success) {
                                        window.location.href = data.redirect || '/login';
                                    } else {
                                        alert('Error al cerrar sesión: ' + data.message);
                                    }
                                })
                                .catch(error => {
                                    console.error('Error al cerrar sesión:', error);
                                    // Redirigir al login incluso si hay error
                                    window.location.href = '/login';
                                });
                        }
                    });
                }
            });
        </script>

        <!--==================== ionicons ============= -->
        <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
        <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

        <!--==================== modulos dinamicos de conocimineto ============= -->
        <script src="assets/js/conocimiento.js"></script>


</body>

</html>